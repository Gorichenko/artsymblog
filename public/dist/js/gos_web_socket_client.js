var WS=function(){var e=function(t,e){this._uri=t,this._session=!1,this._listeners={},this.connect()};return e.prototype.connect=function(){var n=this;ab.connect(this._uri,function(t){n.fire({type:"socket/connect",data:t})},function(t,e){n._session=!1,n.fire({type:"socket/disconnect",data:{code:t,reason:e}})})},e.prototype.on=function(t,e){void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e)},e.prototype.fire=function(t){if("string"==typeof t&&(t={type:t}),t.target||(t.target=this),!t.type)throw new Error("Event object missing 'type' property.");if(this._listeners[t.type]instanceof Array)for(var e=this._listeners[t.type],n=0,i=e.length;n<i;n++)e[n].call(this,t.data)},e.prototype.off=function(t,e){if(this._listeners[t]instanceof Array)for(var n=this._listeners[t],i=0,s=n.length;i<s;i++)if(n[i]===e){n.splice(i,1);break}},{connect:function(t){return new e(t)}}}();